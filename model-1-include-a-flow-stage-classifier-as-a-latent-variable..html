<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>4.1 MODEL 1: include a flow stage classifier as a latent variable. | PLS-SEM FEF model exploration and iterations</title>
  <meta name="description" content="4.1 MODEL 1: include a flow stage classifier as a latent variable. | PLS-SEM FEF model exploration and iterations" />
  <meta name="generator" content="bookdown 0.41 and GitBook 2.6.7" />

  <meta property="og:title" content="4.1 MODEL 1: include a flow stage classifier as a latent variable. | PLS-SEM FEF model exploration and iterations" />
  <meta property="og:type" content="book" />
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="4.1 MODEL 1: include a flow stage classifier as a latent variable. | PLS-SEM FEF model exploration and iterations" />
  
  
  

<meta name="author" content="Lauren Kremer" />


<meta name="date" content="2024-10-27" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="testing-iterations-of-the-pls-sem-fef-model.html"/>
<link rel="next" href="bootstrapping-for-significance-1.html"/>
<script src="assets/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="assets/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="assets/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="assets/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="assets/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="assets/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="assets/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="assets/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="assets/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="assets/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="assets/anchor-sections-1.1.0/anchor-sections.js"></script>
<link href="assets/htmltools-fill-0.5.8.1/fill.css" rel="stylesheet" />
<script src="assets/htmlwidgets-1.6.4/htmlwidgets.js"></script>
<script src="assets/viz-1.8.2/viz.js"></script>
<link href="assets/DiagrammeR-styles-0.2/styles.css" rel="stylesheet" />
<script src="assets/grViz-binding-1.0.11/grViz.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction</a>
<ul>
<li class="chapter" data-level="1.1" data-path="about.html"><a href="about.html"><i class="fa fa-check"></i><b>1.1</b> About</a></li>
<li class="chapter" data-level="1.2" data-path="usage.html"><a href="usage.html"><i class="fa fa-check"></i><b>1.2</b> Usage</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="partial-least-squares-structural-equation-modeling-pls-sem.html"><a href="partial-least-squares-structural-equation-modeling-pls-sem.html"><i class="fa fa-check"></i><b>2</b> Partial least squares – Structural Equation Modeling (PLS-SEM)</a>
<ul>
<li class="chapter" data-level="2.1" data-path="building-the-path-model.html"><a href="building-the-path-model.html"><i class="fa fa-check"></i><b>2.1</b> Building the path model</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="building-the-path-model.html"><a href="building-the-path-model.html#path-diagram-of-our-model-with-tested-indicators"><i class="fa fa-check"></i><b>2.1.1</b> Path diagram of our model with tested indicators</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="data-managment-transformation.html"><a href="data-managment-transformation.html"><i class="fa fa-check"></i><b>2.2</b> Data managment / transformation</a></li>
<li class="chapter" data-level="2.3" data-path="reporting-initial-results-and-evaluating-the-quality-of-reflective-measurement-models.html"><a href="reporting-initial-results-and-evaluating-the-quality-of-reflective-measurement-models.html"><i class="fa fa-check"></i><b>2.3</b> Reporting initial results and evaluating the quality of reflective measurement models</a></li>
<li class="chapter" data-level="2.4" data-path="bootstrapping-for-significance.html"><a href="bootstrapping-for-significance.html"><i class="fa fa-check"></i><b>2.4</b> Bootstrapping for significance</a></li>
<li class="chapter" data-level="2.5" data-path="reporting-resutls-of-bootstrapped-pls.html"><a href="reporting-resutls-of-bootstrapped-pls.html"><i class="fa fa-check"></i><b>2.5</b> Reporting resutls of bootstrapped PLS</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="addition-of-precipitation-and-runoff-data.html"><a href="addition-of-precipitation-and-runoff-data.html"><i class="fa fa-check"></i><b>3</b> Addition of precipitation and runoff data</a></li>
<li class="chapter" data-level="4" data-path="testing-iterations-of-the-pls-sem-fef-model.html"><a href="testing-iterations-of-the-pls-sem-fef-model.html"><i class="fa fa-check"></i><b>4</b> Testing iterations of the PLS-SEM FEF model</a>
<ul>
<li class="chapter" data-level="4.1" data-path="model-1-include-a-flow-stage-classifier-as-a-latent-variable..html"><a href="model-1-include-a-flow-stage-classifier-as-a-latent-variable..html"><i class="fa fa-check"></i><b>4.1</b> MODEL 1: include a flow stage classifier as a latent variable.</a></li>
<li class="chapter" data-level="4.2" data-path="bootstrapping-for-significance-1.html"><a href="bootstrapping-for-significance-1.html"><i class="fa fa-check"></i><b>4.2</b> Bootstrapping for significance</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="bootstrapping-for-significance-1.html"><a href="bootstrapping-for-significance-1.html#results-of-bootstrapped-pls"><i class="fa fa-check"></i><b>4.2.1</b> Results of bootstrapped PLS</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="model-2-include-a-flow-stage-classifier-as-a-latent-variable-where-response-is-protein-like-fraction-of-doc..html"><a href="model-2-include-a-flow-stage-classifier-as-a-latent-variable-where-response-is-protein-like-fraction-of-doc..html"><i class="fa fa-check"></i><b>4.3</b> MODEL 2: include a flow stage classifier as a latent variable where response is protein-like fraction of DOC.</a></li>
<li class="chapter" data-level="4.4" data-path="bootstrapping-for-significance-2.html"><a href="bootstrapping-for-significance-2.html"><i class="fa fa-check"></i><b>4.4</b> Bootstrapping for significance</a>
<ul>
<li class="chapter" data-level="4.4.1" data-path="bootstrapping-for-significance-2.html"><a href="bootstrapping-for-significance-2.html#results-of-bootstrapped-pls-1"><i class="fa fa-check"></i><b>4.4.1</b> Results of bootstrapped PLS</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="reporting-initial-results-and-evaluating-the-quality-of-our-favorite-model.html"><a href="reporting-initial-results-and-evaluating-the-quality-of-our-favorite-model.html"><i class="fa fa-check"></i><b>5</b> Reporting initial results and evaluating the quality of our favorite model</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">PLS-SEM FEF model exploration and iterations</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="model-1-include-a-flow-stage-classifier-as-a-latent-variable." class="section level2 hasAnchor" number="4.1">
<h2><span class="header-section-number">4.1</span> MODEL 1: include a flow stage classifier as a latent variable.<a href="model-1-include-a-flow-stage-classifier-as-a-latent-variable..html#model-1-include-a-flow-stage-classifier-as-a-latent-variable." class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>To include classifications in a PLS model, we generate a column in the dataset for each classificaiton, and a binomial indicators in each row. For example, of the stream stage at the time of sampling is just after peak flow, that sample will have a ‘1’ in the upper descending limb column, and a ‘0’ in all others. Potential classifications are ‘rising limb’, ‘upper descending limb’, ‘lower descending limb’ and baseflow. These classificaitons were developed by finding the date of peak flow for the respective year and stream, and the dates for the end and beginning of baseflow for each calendar year. Then the ‘midway’ point between peakflow and the first date of baseflow delineates upper and lower descending limbs. (find the name of this script, pretty sure its an .ipynb)
Build the outer model or ‘constructs’ or latent variables</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="model-1-include-a-flow-stage-classifier-as-a-latent-variable..html#cb11-1" tabindex="-1"></a>simple_FEF_mm <span class="ot">&lt;-</span> <span class="fu">constructs</span>(</span>
<span id="cb11-2"><a href="model-1-include-a-flow-stage-classifier-as-a-latent-variable..html#cb11-2" tabindex="-1"></a>  <span class="fu">composite</span>(<span class="st">&quot;TOPO&quot;</span>, <span class="fu">multi_items</span>(<span class="st">&quot;topo_&quot;</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>)),</span>
<span id="cb11-3"><a href="model-1-include-a-flow-stage-classifier-as-a-latent-variable..html#cb11-3" tabindex="-1"></a>  <span class="fu">composite</span>(<span class="st">&quot;HYDRO&quot;</span>, <span class="fu">single_item</span>(<span class="st">&quot;hydro_1&quot;</span>)),<span class="co"># multi_items(&quot;hydro_&quot;, 1:2)),, </span></span>
<span id="cb11-4"><a href="model-1-include-a-flow-stage-classifier-as-a-latent-variable..html#cb11-4" tabindex="-1"></a>  <span class="fu">composite</span>(<span class="st">&quot;LANDCOVER&quot;</span>, <span class="fu">multi_items</span>(<span class="st">&quot;landcover_&quot;</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>)),</span>
<span id="cb11-5"><a href="model-1-include-a-flow-stage-classifier-as-a-latent-variable..html#cb11-5" tabindex="-1"></a>  <span class="fu">composite</span>(<span class="st">&quot;DOC&quot;</span>, <span class="fu">single_item</span>(<span class="st">&#39;doc_1&#39;</span>)),</span>
<span id="cb11-6"><a href="model-1-include-a-flow-stage-classifier-as-a-latent-variable..html#cb11-6" tabindex="-1"></a>  <span class="fu">composite</span>(<span class="st">&quot;FLOW_STAGE&quot;</span>, <span class="fu">multi_items</span>(<span class="st">&quot;flow_stage_&quot;</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>))</span>
<span id="cb11-7"><a href="model-1-include-a-flow-stage-classifier-as-a-latent-variable..html#cb11-7" tabindex="-1"></a>)</span></code></pre></div>
<p>Now for the structural model:</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="model-1-include-a-flow-stage-classifier-as-a-latent-variable..html#cb12-1" tabindex="-1"></a><span class="co"># Create structural model</span></span>
<span id="cb12-2"><a href="model-1-include-a-flow-stage-classifier-as-a-latent-variable..html#cb12-2" tabindex="-1"></a>simple_FEF_sm <span class="ot">&lt;-</span> <span class="fu">relationships</span>(</span>
<span id="cb12-3"><a href="model-1-include-a-flow-stage-classifier-as-a-latent-variable..html#cb12-3" tabindex="-1"></a><span class="fu">paths</span>(<span class="at">from =</span> <span class="fu">c</span>(<span class="st">&quot;TOPO&quot;</span>), <span class="at">to =</span> <span class="fu">c</span>(<span class="st">&quot;HYDRO&quot;</span>, <span class="st">&quot;LANDCOVER&quot;</span>, <span class="st">&quot;DOC&quot;</span>)),</span>
<span id="cb12-4"><a href="model-1-include-a-flow-stage-classifier-as-a-latent-variable..html#cb12-4" tabindex="-1"></a><span class="fu">paths</span>(<span class="at">from =</span> <span class="fu">c</span>(<span class="st">&quot;LANDCOVER&quot;</span>), <span class="at">to =</span> <span class="fu">c</span>(<span class="st">&quot;HYDRO&quot;</span>, <span class="st">&quot;DOC&quot;</span>)),</span>
<span id="cb12-5"><a href="model-1-include-a-flow-stage-classifier-as-a-latent-variable..html#cb12-5" tabindex="-1"></a><span class="fu">paths</span>(<span class="at">from =</span> <span class="fu">c</span>(<span class="st">&quot;HYDRO&quot;</span>), <span class="at">to =</span> <span class="fu">c</span>(<span class="st">&quot;DOC&quot;</span>)),</span>
<span id="cb12-6"><a href="model-1-include-a-flow-stage-classifier-as-a-latent-variable..html#cb12-6" tabindex="-1"></a><span class="fu">paths</span>(<span class="at">from =</span> <span class="fu">c</span>(<span class="st">&quot;FLOW_STAGE&quot;</span>), <span class="at">to =</span> <span class="fu">c</span>(<span class="st">&quot;HYDRO&quot;</span>, <span class="st">&quot;DOC&quot;</span>))</span>
<span id="cb12-7"><a href="model-1-include-a-flow-stage-classifier-as-a-latent-variable..html#cb12-7" tabindex="-1"></a>)</span>
<span id="cb12-8"><a href="model-1-include-a-flow-stage-classifier-as-a-latent-variable..html#cb12-8" tabindex="-1"></a></span>
<span id="cb12-9"><a href="model-1-include-a-flow-stage-classifier-as-a-latent-variable..html#cb12-9" tabindex="-1"></a><span class="co"># Note that neither a dataset nor a measurement model is specified in the structural model stage, so we can reuse the structural model object simple_sm across different datasets and measurement models.</span></span></code></pre></div>
<p>Model Estimation using the PLS-SEM algorithm. See demo for more info.</p>
<p>and output summary
model_1 includes flow stage</p>
<p>A plot of result reliability measures:</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="model-1-include-a-flow-stage-classifier-as-a-latent-variable..html#cb13-1" tabindex="-1"></a><span class="fu">plot</span>(summary_simple_fef<span class="sc">$</span>reliability)</span></code></pre></div>
<p><img src="PLS_rendered_book_files/figure-html/unnamed-chunk-26-1.png" width="672" /></p>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="testing-iterations-of-the-pls-sem-fef-model.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="bootstrapping-for-significance-1.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="assets/gitbook-2.6.7/js/app.min.js"></script>
<script src="assets/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="assets/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="assets/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="assets/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="assets/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="assets/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="assets/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
},
"toolbar": {
"position": "static"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
